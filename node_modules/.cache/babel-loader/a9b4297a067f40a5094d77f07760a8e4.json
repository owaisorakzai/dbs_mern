{"ast":null,"code":"var _jsxFileName = \"/home/owais/bds_app/src/components.js/dashboard/stats/stats.js\";\nimport Nav from '../nav';\nimport axios from 'axios';\nimport React, { Component } from 'react';\nimport Filter from './filter';\nimport NewParter from '../components/newParter';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class Stats extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onDateChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      }, () => {\n        let array = [];\n        this.state.users2.map(user => {\n          if (new Date(user.createdAt) >= new Date(this.state.sDate) && new Date(user.createdAt) <= new Date(this.state.eDate)) {\n            array.push(user);\n          }\n        });\n        this.setState({\n          users: array\n        });\n      });\n    };\n\n    this.array1 = [\"createdAt\", \"Name\", \"Surname\", \"Phone Number\", \"Email\", \"Address\", \"Status\"];\n    this.state = {\n      users: [],\n      users2: [],\n      partners: [],\n      sDate: \"\",\n      eDate: Date.now(),\n      collection: []\n    };\n  }\n\n  componentDidMount() {\n    const token = localStorage.getItem('token');\n    axios.post('http://localhost:4242/auth', {\n      token: token\n    }).then(resp => {\n      if (resp.data.decoded.role != \"admin\") {\n        window.location = '/dashboard';\n      } else {\n        axios.get('http://localhost:4242/users/').then(res => {\n          this.setState({\n            users: res.data,\n            users2: res.data\n          });\n        }).catch(error => {\n          console.log(error);\n        });\n        axios.get('http://localhost:4242/partners/').then(res => {\n          this.setState({\n            partners: res.data\n          });\n        }).catch(error => {\n          console.log(error);\n        });\n        this.state.partners.forEach(partner => {\n          let unpaid = this.state.users.filter(user => {\n            return partner._id == user.lead, user.payment == \"Unpaid\";\n          }).length;\n          let paid = this.state.users.filter(user => {\n            return partner._id == user.lead, user.payment == \"Paid\";\n          }).length;\n          let temp = {\n            name: partner.name,\n            unpaid: unpaid,\n            paid: paid,\n            total: paid + unpaid\n          };\n          this.setState({\n            collection: temp\n          });\n        });\n      }\n    });\n  }\n\n  partnerName(partner) {\n    return partner.name;\n  }\n\n  paidCount(partner) {\n    return this.state.users.filter(user => {\n      return user.lead == partner._id && user.status == 'Paid';\n    }).length;\n  }\n\n  unpaidCount(partner) {\n    return Number(this.state.users.filter(user => {\n      return user.lead == partner._id && user.status == 'Unpaid';\n    }).length);\n  }\n\n  total(partner) {\n    const paid = this.state.users.filter(user => {\n      return Number(user.lead == partner._id && user.status == 'Paid');\n    }).length;\n    const unpaid = this.state.users.filter(user => {\n      return user.lead == partner._id && user.status == 'Unpaid';\n    }).length;\n    return Number(paid + unpaid);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-100\",\n        style: {\n          height: '100vh'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            style: {\n              paddingTop: '40px',\n              paddingBottom: '30px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              style: {\n                paddingBottom: '10px'\n              },\n              children: \"Stats\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(NewParter, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(Filter, {\n            sDate: this.state.sDate,\n            eDate: this.state.eDate,\n            onDateChange: this.onDateChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n            style: {\n              width: '5%',\n              textAlign: 'center',\n              padding: '5px',\n              borderRadius: '4px'\n            },\n            className: \"text-white bg-indigo-600 bg-[length:100px_100px]\",\n            children: \"SALES\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n            class: \"table table-bordered\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Partner Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Paid Order\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Unpaid Order\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Total Order\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: this.state.partners.map(partner => {\n                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: this.partnerName(partner)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 159,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: this.paidCount(partner)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: this.unpaidCount(partner)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 165,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: this.total(partner)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 168,\n                    columnNumber: 17\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 15\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                style: {\n                  width: '22%',\n                  textAlign: 'center',\n                  padding: '5px',\n                  borderRadius: '4px'\n                },\n                className: \"text-white bg-indigo-600 bg-[length:100px_100px]\",\n                children: \"PAYMENT LINKS\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n                class: \"table table-bordered\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      scope: \"col\",\n                      children: \"Partner Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 185,\n                      columnNumber: 17\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      scope: \"col\",\n                      children: \"Paid Order\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 186,\n                      columnNumber: 17\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      scope: \"col\",\n                      children: \"Total Order\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 187,\n                      columnNumber: 17\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      scope: \"col\",\n                      children: \"Conversion\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 188,\n                      columnNumber: 17\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 15\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: this.state.partners.map(partner => {\n                    return /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        children: this.partnerName(partner)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 196,\n                        columnNumber: 17\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: this.paidCount(partner)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 199,\n                        columnNumber: 17\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: this.total(partner)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 202,\n                        columnNumber: 17\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: [this.paidCount(partner) * 100 / this.total(partner), \"%\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 205,\n                        columnNumber: 17\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 195,\n                      columnNumber: 15\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 13\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                style: {\n                  width: '21%',\n                  textAlign: 'center',\n                  padding: '5px',\n                  borderRadius: '4px'\n                },\n                className: \"text-white bg-indigo-600 bg-[length:100px_100px]\",\n                children: \"LEADS CHASED\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n                class: \"table table-bordered\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      scope: \"col\",\n                      children: \"Partner Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 224,\n                      columnNumber: 17\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      scope: \"col\",\n                      children: \"Paid Order\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 225,\n                      columnNumber: 17\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      scope: \"col\",\n                      children: \"Total Order\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 226,\n                      columnNumber: 17\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      scope: \"col\",\n                      children: \"Conversion\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 227,\n                      columnNumber: 17\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 15\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: this.state.partners.map(partner => {\n                    return /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        children: this.partnerName(partner)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 235,\n                        columnNumber: 17\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: this.paidCount(partner)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 238,\n                        columnNumber: 17\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: this.total(partner)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 241,\n                        columnNumber: 17\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: [this.paidCount(partner) * 100 / this.total(partner), \"%\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 244,\n                        columnNumber: 17\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 234,\n                      columnNumber: 15\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 13\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 11\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 7\n      }, this)\n    }, void 0, false);\n  }\n\n}","map":{"version":3,"sources":["/home/owais/bds_app/src/components.js/dashboard/stats/stats.js"],"names":["Nav","axios","React","Component","Filter","NewParter","Stats","constructor","props","onDateChange","event","setState","target","name","value","array","state","users2","map","user","Date","createdAt","sDate","eDate","push","users","array1","partners","now","collection","componentDidMount","token","localStorage","getItem","post","then","resp","data","decoded","role","window","location","get","res","catch","error","console","log","forEach","partner","unpaid","filter","_id","lead","payment","length","paid","temp","total","partnerName","paidCount","status","unpaidCount","Number","render","height","paddingTop","paddingBottom","width","textAlign","padding","borderRadius"],"mappings":"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","sourcesContent":["import Nav from '../nav'\nimport axios from 'axios';\nimport React, {Component } from 'react';\nimport Filter from './filter';\nimport NewParter from '../components/newParter';\n\n\nexport default class Stats extends Component {\n  constructor(props) {\n    super(props)\n    this.array1=[\"createdAt\",\"Name\",\"Surname\",\"Phone Number\",\"Email\",\"Address\",\"Status\"]\n    this.state={\n      users:[],\n      users2:[],\n      partners:[],\n      sDate:\"\",\n      eDate: Date.now(),\n      collection:[]\n    }\n  } \n  onDateChange=(event)=>{\n\n    this.setState({[event.target.name]:event.target.value},()=>{\n      let array=[]\n      this.state.users2.map((user)=>{\n        if(new Date(user.createdAt)>=new Date(this.state.sDate) && new Date(user.createdAt)<=new Date(this.state.eDate)){\n          array.push(user)\n        }\n      })\n      this.setState({\n        users:array\n      })\n\n    })\n\n  }\n  componentDidMount(){\n    const token=localStorage.getItem('token')\n    axios.post('http://localhost:4242/auth',{token:token}).then((resp)=>{\n      if(resp.data.decoded.role!=\"admin\"){\n        window.location='/dashboard'}\n      else{\n        axios.get('http://localhost:4242/users/')\n        .then(res => {\n          this.setState({\n            users:res.data,\n            users2:res.data\n\n          });\n        })\n        .catch((error) => {\n          console.log(error);\n        })\n        axios.get('http://localhost:4242/partners/')\n        .then(res => {\n          this.setState({\n            partners:res.data\n          });\n        })\n        .catch((error) => {\n          console.log(error);\n        })\n        this.state.partners.forEach((partner)=>{\n          let unpaid=this.state.users.filter(user=>{\n            return(\n              partner._id==user.lead,\n              user.payment==\"Unpaid\"\n            )\n\n          }).length\n          let paid=this.state.users.filter(user=>{\n            return(\n              partner._id==user.lead,\n              user.payment==\"Paid\"\n            )\n\n          }).length\n          let temp={\n            name:partner.name,\n            unpaid:unpaid,\n            paid:paid,\n            total:paid+unpaid\n          }\n          this.setState({\n            collection:temp\n          })\n        })\n      }\n\n    }\n    \n    )\n\n      \n  }\n  partnerName(partner){\n        return partner.name\n  }\n  paidCount(partner){\n    return(\n      this.state.users.filter((user)=>{\n        return(\n        user.lead==partner._id &&\n        user.status=='Paid')\n      }).length\n    )}\n  unpaidCount(partner){\n    return Number(\n      this.state.users.filter((user)=>{\n        return(\n        user.lead==partner._id &&\n        user.status=='Unpaid')\n      }).length\n    )}\n    total(partner){\n        const paid=this.state.users.filter((user)=>{\n          return Number(\n          user.lead==partner._id &&\n          user.status=='Paid'\n          )\n        }).length\n        const unpaid=this.state.users.filter((user)=>{\n          return(\n          user.lead==partner._id &&\n          user.status=='Unpaid'\n          )\n        }).length\n        return Number(paid+unpaid)\n\n    }\n render(){\n  \n  return (\n    <>\n      <div className='bg-gray-100' style={{height:'100vh'}}>\n      <Nav/>\n      <div className='container'>\n        <div className='row' style={{paddingTop:'40px', paddingBottom:'30px'}}>\n        <h1 style={{paddingBottom:'10px'}}>Stats</h1>\n        <NewParter />\n\n        </div>\n        <Filter sDate={this.state.sDate} eDate={this.state.eDate}  onDateChange={this.onDateChange} />\n        <h6 style={{width:'5%', textAlign:'center', padding:'5px', borderRadius:'4px'}} className='text-white bg-indigo-600 bg-[length:100px_100px]'>SALES</h6>\n        <br/>\n          <table class=\"table table-bordered\">\n            <thead>\n              <tr>\n                <th scope=\"col\">Partner Name</th>\n                <th scope=\"col\">Paid Order</th>\n                <th scope=\"col\">Unpaid Order</th>\n                <th scope=\"col\">Total Order</th>\n              </tr>\n            </thead>\n            <tbody>\n            {this.state.partners.map((partner)=>{\n              return(\n              <tr>\n                <td>\n                {this.partnerName(partner)}\n                </td>\n                <td>\n                {this.paidCount(partner)}\n                </td>\n                <td>\n                {this.unpaidCount(partner)}\n                </td>\n                <td>\n                {this.total(partner)}\n                </td>\n              </tr>\n              )\n              })}\n            </tbody>\n            </table>\n            <div className='row'>\n              <div className='col'>\n              <h6 style={{width:'22%', textAlign:'center', padding:'5px', borderRadius:'4px'}} className='text-white bg-indigo-600 bg-[length:100px_100px]'>PAYMENT LINKS</h6>\n        <br/>\n\n        <table class=\"table table-bordered\">\n            <thead>\n              <tr>\n\n                <th scope=\"col\">Partner Name</th>\n                <th scope=\"col\">Paid Order</th>\n                <th scope=\"col\">Total Order</th>\n                <th scope=\"col\">Conversion</th>\n\n              </tr>\n            </thead>\n            <tbody>\n            {this.state.partners.map((partner)=>{\n              return(\n              <tr>\n                <td>\n                {this.partnerName(partner)}\n                </td>\n                <td>\n                {this.paidCount(partner)}\n                </td>\n                <td>\n                {this.total(partner)}\n                </td>\n                <td>\n                {(this.paidCount(partner)*100)/this.total(partner)}\n                %\n                </td>\n              </tr>\n              )\n              })}\n            </tbody>\n            </table>\n\n              </div>\n              <div className='col'>\n              <h6 style={{width:'21%', textAlign:'center', padding:'5px', borderRadius:'4px'}} className='text-white bg-indigo-600 bg-[length:100px_100px]'>LEADS CHASED</h6>\n        <br/>\n\n          <table class=\"table table-bordered\">\n            <thead>\n              <tr>\n\n                <th scope=\"col\">Partner Name</th>\n                <th scope=\"col\">Paid Order</th>\n                <th scope=\"col\">Total Order</th>\n                <th scope=\"col\">Conversion</th>\n\n              </tr>\n            </thead>\n            <tbody>\n            {this.state.partners.map((partner)=>{\n              return(\n              <tr>\n                <td>\n                {this.partnerName(partner)}\n                </td>\n                <td>\n                {this.paidCount(partner)}\n                </td>\n                <td>\n                {this.total(partner)}\n                </td>\n                <td>\n                {(this.paidCount(partner)*100)/this.total(partner)}\n                %\n                </td>\n              </tr>\n              )\n              })}\n            </tbody>\n            </table>\n\n              </div>\n\n            </div>\n      </div>\n      </div>\n</>\n  )\n}\n}\n"]},"metadata":{},"sourceType":"module"}